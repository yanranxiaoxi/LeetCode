每日一题 2022.03.26

## 题目

你现在是一场采用特殊赛制棒球比赛的记录员。这场比赛由若干回合组成，过去几回合的得分可能会影响以后几回合的得分。

比赛开始时，记录是空白的。你会得到一个记录操作的字符串列表 `ops`，其中 `ops[i]` 是你需要记录的第 `i` 项操作，`ops` 遵循下述规则：

1. 整数 `x` - 表示本回合新获得分数 `x`
2. `"+"` - 表示本回合新获得的得分是前两次得分的总和。题目数据保证记录此操作时前面总是存在两个有效的分数。
3. `"D"` - 表示本回合新获得的得分是前一次得分的两倍。题目数据保证记录此操作时前面总是存在一个有效的分数。
4. `"C"` - 表示前一次得分无效，将其从记录中移除。题目数据保证记录此操作时前面总是存在一个有效的分数。

请你返回记录中所有得分的总和。

## 解题思路

1. 将每轮得到的份数放到数组中，并维护一个有效轮计数 `j`（为了不每次计算数组长度）
2. 如果当前轮为 `C`，则将数组中最后一个删除，且有效轮数 `j` 递减
3. 其他值则对应处理入数组，有效轮数 `$j` 累加
4. 最终计算出数组的总和

## 题解

### PHP

```PHP
class Solution {

    /**
     * @param String[] $ops
     * @return Integer
     */
    function calPoints($ops) {
        $points = [];
        $j = -1;
        for ($i = 0; $i < count($ops); $i++) {
            if ($ops[$i] == 'C') {
                array_pop($points);
                $j--;
            } elseif ($ops[$i] == 'D') {
                $points[] = $points[$j] * 2;
                $j++;
            } elseif ($ops[$i] == '+') {
                $points[] = $points[$j] + $points[$j - 1];
                $j++;
            } else {
                $points[] = $ops[$i];
                $j++;
            }
        }
        return array_sum($points);       
    }
}
```
